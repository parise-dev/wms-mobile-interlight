<div class="min-vh-100 d-flex flex-column app-shell" style="overflow-y:auto;">
   <div class="reversa-header sticky-top">
    <div class="d-flex align-items-center justify-content-between">
      <button class="btn btn-link text-white p-0 d-flex align-items-center" (click)="backHome()">
        <i class="bi bi-arrow-left-circle me-2"></i>
      </button>

      <div class="flex-grow-1 text-center">
        <h4 class="m-0 fw-bold">Reversa PV {{ id }}</h4>
     </div>

      <div style="width:72px"><!-- spacer para balancear --></div>
    </div>
  </div>


  <!-- Conteúdo -->
  <main class="container flex-grow-1 py-3">
    <!-- Input / bipagem -->
    <div class="card border-0 shadow-md mb-3">
      <div class="card-body">
        <h6 class="fw-semibold mb-3">Digite ou bipe o código do volume:</h6>
        <div class="row g-2 align-items-center">
          <div class="col-12 col-sm-8 col-md-6">
            <div class="input-group">
              <input
                type="text"
                class="form-control"
                placeholder="Número do volume"
                #barcodeInput
                name="keyD"
                [(ngModel)]="volumeBip"
                (keyup.enter)="onSubmitVolume()"
                aria-label="Número do volume">
              <button class="btn btn-outline-secondary" type="button" (click)="onSubmitVolume()">OK</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Título/contador -->
    <div class="d-flex align-items-baseline justify-content-between flex-wrap gap-2 mb-2">
      <h6 class="m-0">Volumes pertencentes ao pedido <span class="fw-bold">{{ id }}</span></h6>
      <small class="text-muted" *ngIf="reverves?.length">Total: {{ reverves.length }}</small>
    </div>

    <!-- Empty state -->
    <div class="alert alert-info" role="alert" *ngIf="reverves && reverves.length === 0">
      Nenhum item para conferir.
    </div>

    <!-- Grid de cards (alturas iguais) -->
    <div class="row g-3 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4">
      <div class="col" *ngFor="let d of reverves; index as i">
        <a class="card volume-card h-100 border-0 shadow-sm"
           [routerLink]="['/reverse/docn', id, 'volume', d.doc]"
           [routerDirection]="'root'">
          <div class="card-body d-flex flex-column">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <h5 style="font-size: 22px;" class="badge bg-success-subtle text-success-emphasis fw-semibold ps-4 pe-4 h1">
                {{ formatVol(d.doc)}}
              </h5>
              <i class="bi bi-box-seam fs-5 text-secondary"></i>
            </div>

            <div class="flex-grow-1">
              <div class="text-muted small">Quantidade de Itens</div>
              <div class="fs-6 fw-semibold">{{ d.itens }}</div>
            </div>

            <div class="mt-3 d-flex align-items-center justify-content-between">
              <span class="status-dot bg-primary"></span>
              <span class="text-muted small">ver detalhes</span>
            </div>
          </div>
        </a>
      </div>
    </div>
  </main>

  <!-- Footer fixo centralizado -->
  <footer class="elinox-footer">
    <div class="container text-center small">
      MY WMS – <strong>Versão atual:</strong> V2.2.1 <strong>IP:</strong> 192.168.10.12
    </div>
  </footer>
</div>
